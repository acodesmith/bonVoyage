(function(a){a.bonVoyage=function(b,c){var d={changeAgents:[],exitMessage:"Leaving the page will cause your changes to be lost.",ignoreAgents:[],ignoreButtons:[],afterChange:function(){},catchSubmit:false};var e=this;e.settings={};var f=a(b),b=b;e.init=function(){e.settings=a.extend({},d,c);var b=e.settings;g(b.changeAgents,b.ignoreAgents,j,b.afterChange);h(b.ignoreButtons)};var g=function(b,c,d,e){if(!!b&&b.constructor==Array&&b.length>0){f.on("change",b.join(", "),function(){d();e();i()})}else{f.on("change","select, input, textarea",function(){d();e()});a(c.join(", ")).unbind("change")}i()};var h=function(b){a(b.join(", ")).on("click",function(){a(window).unbind("beforeunload")});a(b.join(", ")).on("change",function(){a(window).unbind("beforeunload")})};var i=function(){if(!e.settings.catchSubmit){h(["input[type=submit]"])}};var j=function(){a(window).bind("beforeunload",function(a){return e.settings.exitMessage})};e.init()};a.fn.bonVoyage=function(b){return this.each(function(){if(undefined==a(this).data("bonVoyage")){var c=new a.bonVoyage(this,b);a(this).data("bonVoyage",c)}})}})(jQuery)